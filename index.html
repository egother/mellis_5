<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cumple Venu & Otto</title>

    <!-- METADATOS DEL CREADOR (¬°T√ö!) -->
    <meta name="author" content="Ezequiel F. G√≥mez">
    <meta name="description" content="Invitaci√≥n para el 5to Cumple de Venu & Otto">

    <!-- CR√âDITOS -->
    <meta name="generator" content="Gemini AI (Co-created with)">

    <!-- OPEN GRAPH: Para que se vea lindo al compartir en WhatsApp/Redes -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Cumple Venu & Otto | ¬°Elige a tu Melli!">
    <meta property="og:description"
        content="¬øTeam Otto o Team Venu? Entra, elige tu personaje y descubre los detalles de la fiesta.">
    <!-- TIPS: Sube una captura de pantalla a tu repo y pega el link aqu√≠ abajo en 'content' -->
    <meta property="og:image" content="https://egothero.github.io/mellis_5/preview.jpg">
    <meta property="og:url" content="https://egothero.github.io/mellis_5/">

    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- PANTALLA DE CARGA -->
    <div id="loading-screen">
        <h1 class="pixel-text loading-text">LOADING...</h1>
        <div class="loading-bar-container">
            <div class="loading-bar" id="progress-bar"></div>
        </div>
    </div>

    <div id="app-container">

        <section class="screen-selection">

            <div class="title-overlay">
                <h1 class="pixel-text" id="main-title">ELIGE A TU MELLI</h1>
            </div>

            <div class="card" id="card-otto" onclick="handleCardClick('card-otto', 'OTTO')"></div>

            <div class="card" id="card-venu" onclick="handleCardClick('card-venu', 'VENU')"></div>

        </section>

        <section class="screen-party" id="section-party">

            <div class="party-visual"></div>

            <div class="party-info-container">

                <h2 class="pixel-subtitle">M√ÅS INFO</h2>

                <div class="rpg-box">
                    <div class="row-split">
                        <div class="rpg-item">
                            <span class="rpg-label">FECHA</span>
                            <div class="rpg-value">
                                <span class="icon">üìÖ</span> 22 FEB
                            </div>
                        </div>
                        <div class="rpg-item">
                            <span class="rpg-label">HORA</span>
                            <div class="rpg-value">
                                <span class="icon">‚è∞</span> 14-18hs
                            </div>
                        </div>
                    </div>

                    <div class="rpg-item full-width">
                        <span class="rpg-label">UBICACI√ìN (Tap para ver)</span>
                        <div class="rpg-value">
                            <a href="https://maps.app.goo.gl/SkGyzGuZXqf9pjEw6" target="_blank" class="map-link">
                                <span class="icon">üìç</span> Calle Brasil 2865, Ezpeleta
                            </a>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 10px; align-items: stretch; margin-bottom: 20px;">
                    <div class="retro-alert" style="flex: 1; margin-bottom: 0; animation: water-pulse 1.5s infinite;">
                        <span class="alert-icon">üåä</span> ¬°TRAER MALLA! <span class="alert-icon">üåä</span>
                    </div>
                    <button class="retro-btn" onclick="agendarInteligente(event)" aria-label="Agendar evento">
                        <span style="margin-right: 5px;">üìÖ</span> AGENDALO!
                    </button>
                </div>

                <div class="scroll-up-mini" onclick="window.scrollTo({top:0, behavior:'smooth'})">‚¨Ü</div>
            </div>

        </section>

    </div>

    <script>
        function agendarInteligente(e) {
            e.preventDefault();

            // 1. Detectar si es dispositivo m√≥vil (Android, iPhone, iPad, etc.)
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

            // DATOS DEL EVENTO (22 Feb 2026, 14:00 a 18:00)
            const titulo = "Cumple Venu & Otto (5 A√±os)";
            const descripcion = "¬°Traigan malla y toalla! Los esperamos.";
            const ubicacion = "Calle Brasil 2865";
            const fechaInicio = "20260222T140000";
            const fechaFin = "20260222T180000";

            if (isMobile) {
                // === ESTRATEGIA M√ìVIL: ARCHIVO ICS (Abre la App Nativa) ===

                const event = [
                    "BEGIN:VCALENDAR",
                    "VERSION:2.0",
                    "BEGIN:VEVENT",
                    "URL:" + document.URL,
                    "DTSTART:" + fechaInicio,
                    "DTEND:" + fechaFin,
                    "SUMMARY:" + titulo,
                    "DESCRIPTION:" + descripcion,
                    "LOCATION:" + ubicacion,
                    "END:VEVENT",
                    "END:VCALENDAR"
                ].join("\n");

                const blob = new Blob([event], { type: 'text/calendar;charset=utf-8' });

                // Truco para iOS: A veces necesita que se abra en una ventana nueva para detectar el tipo de archivo
                // Pero el m√©todo de descarga directa suele funcionar mejor en versiones modernas.
                const link = document.createElement('a');
                link.href = window.URL.createObjectURL(blob);
                link.setAttribute('download', 'cumple_mellis.ics');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

            } else {
                // === ESTRATEGIA PC: GOOGLE CALENDAR WEB (Pesta√±a nueva) ===

                const googleUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(titulo)}&dates=${fechaInicio}/${fechaFin}&details=${encodeURIComponent(descripcion)}&location=${encodeURIComponent(ubicacion)}&ctz=America/Argentina/Buenos_Aires`;

                window.open(googleUrl, '_blank');
            }
        }

        window.onload = function () {
            const loader = document.getElementById('loading-screen');
            const progressBar = document.getElementById('progress-bar');

            let width = 0;
            // Duraci√≥n total objetivo: 3000ms (3 segundos)
            // Intervalo de actualizaci√≥n: 30ms (para que sea fluido)
            // Pasos totales: 3000 / 30 = 100 pasos
            // Incremento por paso: 1%

            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    // Una vez completo, esperamos un poquito y desvanecemos
                    setTimeout(() => {
                        loader.classList.add('fade-out');
                        setTimeout(() => {
                            loader.style.display = 'none';
                        }, 500);
                    }, 200);
                } else {
                    width++;
                    progressBar.style.width = width + '%';
                }
            }, 30);
        };

        let currentSelection = null;

        function handleCardClick(cardId, name) {
            const otto = document.getElementById('card-otto');
            const venu = document.getElementById('card-venu');
            const title = document.getElementById('main-title');
            const partySection = document.getElementById('section-party');

            // 1. Confirmaci√≥n (Si tocan de nuevo al mismo)
            if (currentSelection === cardId) {
                partySection.scrollIntoView({ behavior: 'smooth' });
                return;
            }

            // 2. Selecci√≥n Inicial
            currentSelection = cardId;

            // Texto din√°mico
            // Usamos colores inline para asegurar que se note de qui√©n hablamos
            const color = name === 'OTTO' ? '#ff9900' : '#d600ff';
            title.innerHTML = `CONFIRMAR A <span style="color:${color}">${name}</span>`;

            // Reiniciar animaci√≥n del t√≠tulo
            title.style.animation = "none";
            title.offsetHeight; /* Trigger reflow */
            title.style.animation = "blink 0.3s infinite step-end";

            // Resetear clases
            otto.className = 'card';
            venu.className = 'card';

            // Aplicar estados
            if (cardId === 'card-otto') {
                otto.classList.add('active', 'active-mode');
                venu.classList.add('dimmed');
            } else {
                venu.classList.add('active', 'active-mode');
                otto.classList.add('dimmed');
            }
        }
    </script>
</body>

</html>